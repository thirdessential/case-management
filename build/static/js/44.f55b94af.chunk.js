(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[44],{459:function(e,t,a){"use strict";var l=a(0),s=a.n(l),n=(a(227),a(999),a(467));a(3);const r=n.a.Option;n.a;s.a.Component},577:function(e,t,a){"use strict";var l=a(4),s=a(7),n=a(6),r=a.n(n),i=a(0),o=a.n(i),c=a(222),d=o.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,i=e.striped,d=e.bordered,m=e.borderless,h=e.hover,u=e.size,p=e.variant,E=e.responsive,g=Object(s.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),b=Object(c.b)(a,"table"),D=r()(n,b,p&&b+"-"+p,u&&b+"-"+u,i&&b+"-striped",d&&b+"-bordered",m&&b+"-borderless",h&&b+"-hover"),C=o.a.createElement("table",Object(l.a)({},g,{className:D,ref:t}));if(E){var k=b+"-responsive";return"string"===typeof E&&(k=k+"-"+E),o.a.createElement("div",{className:k},C)}return C}));t.a=d},582:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),n=a(950),r=a(577),i=a(482),o=a(999),c=a(110),d=a(268),m=a(1004),h=a(996),u=a(467),p=a(8),E=(a(459),a(3)),g=a(13),b=a.n(g);const D=u.a.Option;JSON.parse(window.localStorage.getItem("Case.user"));let C={},k=null,f={};u.a;class v extends s.a.Component{constructor(){super(),this.handleDelete=e=>{console.log("from delete"),console.log(e),console.log(f);const t=f,a=t.tasks[e]._id;console.log(a),t.tasks.splice(e,1),E.b.post("/tasks/list/edit/"+t._id,t).then(t=>{console.log(t);let l=this.state.tableData;delete l[e],this.setState({tableData:l}),console.log(l),E.b.get("tasks/delete/"+a).then(e=>{console.log(e),c.a.success({message:"Task deleted from the list"})})}).catch(()=>{c.a.error({message:"Failed."})}),console.log(t)},this.handleEdit=(e,t)=>{this.setState({editMode:!0}),this.setState({Data:e}),console.log(e),this.setState({selected:e})},this.handleCancel=()=>{b.a.findDOMNode(this.messageForm).reset(),this.setState({visible:!1,editMode:!1,Data:{priority:"Normal",matter:""}})},this.handleChange=e=>{e.persist(),console.log(e);let t=this.state;t.Data[e.target.id]=e.target.value,this.setState(t),console.log(this.state.Data)},this.handleOk=e=>{if(e.preventDefault(),c.a.destroy(),""===this.state.Data.taskName||void 0===this.state.Data.taskName)c.a.warning({message:"Please provide a task name"});else if(""===this.state.Data.description||void 0===this.state.Data.description)c.a.warning({message:"Please provide a description"});else if(""===this.state.Data.dueDate||void 0===this.state.Data.dueDate)c.a.warning({message:"Please select a due date"});else if(""===this.state.Data.matter||void 0===this.state.Data.matter)c.a.warning({message:"Please select a matter"});else{this.setState({disable:!0});const e=this.state.Data;e.userId=this.props.userId,this.state.editMode?E.b.post("tasks/edit/"+e._id,e).then(e=>{console.log(e),this.setState({disable:!1}),this.componentDidMount(),c.a.success({message:"Task Edited"})}).catch(()=>{this.openNotificationWithFailure("error"),this.setState({disable:!1})}).then(()=>{b.a.findDOMNode(this.messageForm).reset()}):(this.setState({confirmLoading:!0}),E.b.post("/tasks/create",e).then(e=>{console.log(e),f.tasks.push(e.data.data._id),E.b.post("/tasks/list/edit/"+f._id,f).then(e=>{console.log(e),this.setState({disable:!1}),this.componentDidMount(),c.a.success({message:"Task Added to the list"})}).catch(()=>{c.a.error({message:"Failed."}),this.setState({disable:!1})}).then(()=>{b.a.findDOMNode(this.messageForm).reset()})})),setTimeout(()=>{this.setState({visible:!1,confirmLoading:!1,editMode:!1})},1e3)}},this.state={tableData:"",visible:!1,Data:{priority:"Normal",matter:""},editMode:!1,disable:!1}}componentDidMount(){E.b.get("/tasks/list/view/"+this.props.location.state.id).then(e=>{let t=[];f=e.data.data,console.log(e),e.data.data.tasks.map((e,a)=>{let l=e.matter.matterDescription;e.matter=e.matter._id;const n=s.a.createElement("tr",null,s.a.createElement("td",null,e.taskName),s.a.createElement("td",null,e.priority),s.a.createElement("td",null,e.description),s.a.createElement("td",null,e.dueDate.substring(0,10)),s.a.createElement("td",null,l),s.a.createElement("td",null,s.a.createElement(d.a,{onClick:()=>this.handleEdit(e,a),type:"link"},"Edit")),s.a.createElement("td",null,s.a.createElement(m.a,{title:"Are you sure you want to delete",onConfirm:()=>this.handleDelete(a),okText:"Yes",cancelText:"No"},s.a.createElement(d.a,{type:"link",danger:!0},"Delete"))));console.log(n),t.push(n)}),this.setState({tableData:t}),console.log(this.state.tableData)}),E.b.get("/matter/viewforuser/"+this.props.userId).then(e=>{C=e.data.data,k=C.map((e,t)=>{if(0==t){let t=this.state;t.Data.matter=e._id,this.setState(t)}return s.a.createElement("option",{value:e._id},e.matterDescription)}),this.setState({options:k})})}render(){return s.a.createElement("div",null,s.a.createElement(n.a,null,s.a.createElement(n.a.Header,null,s.a.createElement("h4",null,this.props.location.state.name)),s.a.createElement(n.a.Body,null,s.a.createElement(r.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("td",null,this.props.location.state.name),s.a.createElement("th",null,"Description"),s.a.createElement("td",null,this.props.location.state.description)),s.a.createElement("tr",null,s.a.createElement("th",null,"Practice Area"),s.a.createElement("td",null,this.props.location.state.practiseArea)))))),s.a.createElement(n.a,null,s.a.createElement(n.a.Header,null,s.a.createElement("div",{className:"d-flex example-parent"},s.a.createElement("h3",{className:"p-2 col-example"},"Task Templates"),s.a.createElement("div",{className:"ml-auto p-2 col-example"},s.a.createElement(i.a,{onClick:()=>{this.setState({visible:!0})},variant:"success"},"Add task to the list")))),s.a.createElement(n.a.Body,null,s.a.createElement(r.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Priority"),s.a.createElement("th",null,"Permissions"),s.a.createElement("th",null,"Due At"),s.a.createElement("th",null,"Matter"),s.a.createElement("th",null,"Edit"),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,this.state.tableData)))),s.a.createElement(h.a,{title:"Create New Task",visible:this.state.visible,confirmLoading:this.state.confirmLoading,onCancel:this.handleCancel,onOk:this.handleOk,footer:[s.a.createElement(d.a,{onClick:this.handleCancel},"Cancel"),s.a.createElement(d.a,{type:"primary",disabled:this.state.disable,onClick:this.handleOk},"Create Task")]},s.a.createElement(o.a,{className:"form-details",id:"myForm",className:"form",ref:e=>this.messageForm=e},s.a.createElement(o.a.Group,{controlId:"taskName"},s.a.createElement(o.a.Label,null,"Task Name"),s.a.createElement(o.a.Control,{type:"text",placeholder:"Task Name",defaultValue:this.state.name,onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"dueDate"},s.a.createElement(o.a.Label,null,"Due Date"),s.a.createElement(o.a.Control,{required:!0,type:"date",placeholder:"Due Date",onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"description"},s.a.createElement(o.a.Label,null,"Description"),s.a.createElement(o.a.Control,{required:!0,as:"textarea",rows:"3",onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"priority"},s.a.createElement(o.a.Label,null,"Priority"),s.a.createElement(o.a.Control,{as:"select",defaultValue:"Normal",required:!0,onChange:this.handleChange},s.a.createElement("option",null,"Low"),s.a.createElement("option",null,"Normal"),s.a.createElement("option",null,"High"))),s.a.createElement(o.a.Group,{controlId:"matter"},s.a.createElement(o.a.Label,null,"Matter"),s.a.createElement(o.a.Control,{required:!0,as:"select",onChange:this.handleChange,name:"matter"},s.a.createElement("option",null,"Select a matter"),this.state.options)),s.a.createElement("br",null))),s.a.createElement(h.a,{title:"Edit task",visible:this.state.editMode,confirmLoading:this.state.confirmLoading,onCancel:this.handleCancel,onOk:this.handleOk,footer:[s.a.createElement(d.a,{onClick:this.handleCancel},"Cancel"),s.a.createElement(d.a,{type:"primary",disabled:this.state.disable,onClick:this.handleOk},"Update Task")]},s.a.createElement(o.a,{id:"myForm",className:"form",ref:e=>this.messageForm=e,className:"form-details"},s.a.createElement(o.a.Group,{controlId:"taskName"},s.a.createElement(o.a.Label,null,"Task Name"),s.a.createElement(o.a.Control,{required:!0,type:"text",defaultValue:this.state.Data.taskName,onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"dueDate"},s.a.createElement(o.a.Label,null,"Due Date"),s.a.createElement(o.a.Control,{type:"date",defaultValue:this.state.Data.dueDate?this.state.Data.dueDate.substring(0,10):"",onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"description"},s.a.createElement(o.a.Label,null,"Description"),s.a.createElement(o.a.Control,{required:!0,defaultValue:this.state.Data.description,as:"textarea",rows:"3",onChange:this.handleChange})),s.a.createElement(o.a.Group,{controlId:"matter"},s.a.createElement(o.a.Label,null,"Matter"),s.a.createElement(o.a.Control,{required:!0,as:"select",value:this.state.Data.matter,onChange:this.handleChange,name:"matter"},s.a.createElement("option",null,"Select a matter"),this.state.options)),s.a.createElement(o.a.Group,{controlId:"priority"},s.a.createElement(o.a.Label,null,"Priority"),s.a.createElement(o.a.Control,{as:"select",required:!0,defaultValue:this.state.Data.priority,onChange:this.handleChange},s.a.createElement("option",null,"Low"),s.a.createElement("option",null,"Normal"),s.a.createElement("option",null,"High"))),s.a.createElement("br",null))))}}t.default=Object(p.b)(e=>({userId:e.user.token.user._id}))(v)}}]);
//# sourceMappingURL=44.f55b94af.chunk.js.map