(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[79],{566:function(e,a,t){"use strict";t.r(a);var l=t(225),s=t.n(l),n=t(226),r=t(0),c=t.n(r),m=t(973),i=t(728),o=t(950),d=t(482),u=t(948),E=t(3),p=t(58),h=t(223),g=t(8),b=t(253),v=t.n(b),N=t(254),f=t.n(N),y=t(255),x=t.n(y),w=t(17);class k extends c.a.Component{constructor(){super(),this.state={time:"",taskCount:0,taskduetoday:0,eventduetoday:0,eventCount:0,draftCount:0,draftAmount:0,unPaidCount:0,unPaidAmount:0,overDueCount:0,overDueAmount:0,totalHours:0,targetDetails:{},percent:0,left:0}}componentDidMount(){var e=this;return Object(n.a)(s.a.mark((function a(){var t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=new Date,E.b.get("/tasks/viewforuser/"+e.props.userId).then(a=>{let l=0,s=0;a.data.data.map((e,a)=>{if(0==e.status){l++;var n=new Date(Date.parse(e.dueDate));n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()&&s++}}),e.setState({taskCount:l,taskduetoday:s})}),E.b.get("/calendar/viewforuser/"+e.props.userId).then(a=>{let l=0,s=0;a.data.data.map((e,a)=>{l++;var n=new Date(Date.parse(e.startTime));n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()&&s++}),e.setState({eventCount:l,eventduetoday:s})}),E.b.get("/billing/bill/viewforuser/"+e.props.userId).then(a=>{let t=0,l=0,s=0,n=0,r=0,c=0;const m=new Date((new Date).toString().split("GMT")[0]+" UTC").toISOString().split(".")[0],i=a.data.data[0]?a.data.data[0].dueDate:"";m>i?console.log("hellow"):console.log("skadh"),console.log(m),console.log(i),a.data.data.map((e,a)=>{"Unpaid"==e.status&&(s++,n+=parseFloat(e.balance),m>e.dueDate&&(r++,c+=parseFloat(e.balance))),"draft"==e.status&&(t++,l+=parseFloat(e.balance))}),e.setState({unPaidAmount:n,unPaidCount:s,draftAmount:l,draftCount:t,overDueCount:r,overDueAmount:c})}),0,E.b.get("/activity/viewforuser/"+e.props.userId).then(a=>{console.group(a);let t=0;a.data.data.map((e,a)=>{let l=new Date((new Date).getFullYear(),11,31),s=new Date((new Date).getFullYear(),1,1),n=new Date(Date.parse(e.date));if(n<l&&n>s&&("expense"==e.type&&(t+=parseInt(e.qty)),"time"==e.type)){var r=e.time.split(":")[0];e.time.split(":")[1],e.time.split(":")[2];t+=parseInt(r)}}),e.setState({totalHours:t}),console.group(e.state.totalHours)}).then(()=>{E.b.get("user/view/".concat(e.props.userId)).then(a=>{if(void 0==a.data.data.target)a.data.data.target=null;else{let t=a.data.data.target,l=parseFloat(t.target)/parseFloat(t.rate),s=l-e.state.totalHours>=0?l-e.state.totalHours:0;console.log(e.state.totalHours+"   "+l);let n=e.state.totalHours/l*100;e.setState({targetHours:l,percent:n,left:s})}e.setState({targetDetails:a.data.data.target})})});case 6:case"end":return a.stop()}}),a)})))()}render(){p.a,h.a.BLANK_LINK,v.a,h.a.BLANK_LINK,f.a,h.a.BLANK_LINK,x.a,h.a.BLANK_LINK,v.a,h.a.BLANK_LINK,f.a,h.a.BLANK_LINK,x.a;return c.a.createElement(p.a,null,c.a.createElement("h6",{style:{"font-size":"16px","padding-bottom":"10px"}},c.a.createElement("b",null,"Today's Agenda")),c.a.createElement(m.a,null,c.a.createElement(i.a,{md:6,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"0px 0.6rem"}},c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-6",style:{"border-right":"1px solid #d7dee2","padding-right":"0px"}},c.a.createElement("div",{className:"d-flex",style:{padding:"1rem 0","align-items":"center","justify-content":"space-around"}},c.a.createElement("h5",{className:"dashboard-taskmargin"},c.a.createElement("b",null,this.state.taskCount)),c.a.createElement("div",{className:"dashboard-taskmargin"},c.a.createElement("p",{className:"dashboard-totaltask"},c.a.createElement("b",null,"Total task due")),c.a.createElement("span",{style:{"font-size":"9px"}},"Updated just now.")),c.a.createElement("div",{className:"form-add",onClick:()=>this.props.history.push("/tasks","from dashboard")}))),c.a.createElement("div",{className:"col-6"},c.a.createElement("p",{className:"dashboard-tasktoday"},"You have ",this.state.taskduetoday," tasks due today")))))),c.a.createElement(i.a,{md:6,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"0px 0.6rem"}},c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-6",style:{"border-right":"1px solid #d7dee2","padding-right":"0px"}},c.a.createElement("div",{className:"d-flex",style:{padding:"1rem 0","align-items":"center","justify-content":"space-around"}},c.a.createElement("h5",{className:"dashboard-taskmargin"},c.a.createElement("b",null,this.state.eventCount)),c.a.createElement("div",{className:"dashboard-taskmargin"},c.a.createElement("p",{className:"dashboard-totaltask"},c.a.createElement("b",null,"Total calendar Events")),c.a.createElement("span",{style:{"font-size":"9px"}},"Updated just now.")),c.a.createElement("div",{className:"form-add",onClick:()=>this.props.history.push("/calendar")}))),c.a.createElement("div",{className:"col-6"},c.a.createElement("p",{className:"dashboard-tasktoday"},"You have ",this.state.eventduetoday," events scheduled for today"))))))),c.a.createElement(m.a,null,c.a.createElement(i.a,{md:5,xl:5},c.a.createElement("h6",{style:{"font-size":"16px","padding-bottom":"10px"}},c.a.createElement("b",null,"Hourly Metrics")),c.a.createElement(o.a,{className:"Recent-Users",style:{height:"390px"}},c.a.createElement(o.a.Header,null,c.a.createElement(o.a.Title,{as:"h5"},"Billable Hours Target")),c.a.createElement(o.a.Body,{className:"px-0 py-2",style:{display:"flex","justify-content":"center","align-items":"center"}},null==this.state.targetDetails?c.a.createElement("div",null,c.a.createElement("h6",{className:"mb-4 pl-2"},c.a.createElement("b",null,"Billable Hours Target")),c.a.createElement("div",null,c.a.createElement(d.a,{variant:"info",className:"btn-sm",onClick:()=>this.props.history.push("/target")},"SET UP YOUR TARGET"))):c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(u.a,{type:"circle",percent:this.state.percent.toFixed("0")}),"`          ",c.a.createElement("h6",{className:"responsive-target"},this.state.left," hours more to achive the target"),c.a.createElement("div",null,c.a.createElement(d.a,{variant:"info",className:"btn-sm",onClick:()=>this.props.history.push("/target")},"RESET YOUR TARGET")))))),c.a.createElement(i.a,{md:7,xl:7},c.a.createElement("h6",{style:{"font-size":"16px","padding-bottom":"10px"}},c.a.createElement("b",null,"Billing Metrics for Firm")),c.a.createElement(m.a,null,c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Draft bills")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null,this.state.draftCount))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"success",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"Create New Bills")))))),c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Total in draft")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null," $",this.state.draftAmount.toFixed("2")))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"info",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"Create New Bills"))))))),c.a.createElement(m.a,null,c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Unpaid bills")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null," ",this.state.unPaidCount))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"success",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"Create New Bills")))))),c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Total unpaid bills")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null," $",this.state.unPaidAmount.toFixed("2")))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"info",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"Create New Bills"))))))),c.a.createElement(m.a,null,c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Overdue bills")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null,"  ",this.state.overDueCount," "))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"success",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"Create New Bills")))))),c.a.createElement(i.a,{md:12,xl:6},c.a.createElement(o.a,null,c.a.createElement(o.a.Body,{style:{padding:"1rem"}},c.a.createElement("h6",{className:"mb-4"},c.a.createElement("b",null,"Total overdue bills")),c.a.createElement("div",{className:"row d-flex align-items-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},c.a.createElement("b",null," $",this.state.overDueAmount.toFixed("2")))),c.a.createElement("div",{className:"col-8 text-right"},c.a.createElement(d.a,{variant:"info",className:"btn-sm",onClick:()=>this.props.history.push("/manage/billing")},"View Overdue Bills"))))))))))}}a.default=Object(g.b)(e=>({userId:e.user.token.user._id}),e=>({logoutUser:w.l}))(k)}}]);
//# sourceMappingURL=79.b52cf09d.chunk.js.map