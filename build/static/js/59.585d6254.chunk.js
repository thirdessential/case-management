(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[59],{611:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(225),o=a.n(r),l=a(226),i=a(0),c=a.n(i),s=a(999),u=a(728),p=a(482),m=a(110),d=a(1001),f=a(996),h=a(3),y=a(590),b=a(591),v=a(8),E=a(6),C=a.n(E),g=a(278),x=a.n(g),w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var k=function(e){function t(){return I(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),w(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.forceRender||!x()(this.props,e)}},{key:"render",value:function(){var e;if(this._isActived=this.props.forceRender||this._isActived||this.props.isActive,!this._isActived)return null;var t=this.props,a=t.prefixCls,n=t.isActive,r=t.children,o=t.destroyInactivePanel,l=t.forceRender,i=t.role,s=C()(a+"-content",(O(e={},a+"-content-active",n),O(e,a+"-content-inactive",!n),e)),u=l||n||!o?c.a.createElement("div",{className:a+"-content-box"},r):null;return c.a.createElement("div",{className:s,role:i},u)}}]),t}(i.Component),A=a(76),N=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var _=function(e){function t(){var e,a,n;D(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return a=n=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleItemClick=function(){var e=n.props,t=e.onItemClick,a=e.panelKey;"function"===typeof t&&t(a)},n.handleKeyPress=function(e){"Enter"!==e.key&&13!==e.keyCode&&13!==e.which||n.handleItemClick()},S(n,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),N(t,[{key:"shouldComponentUpdate",value:function(e){return!x()(this.props,e)}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.id,r=t.style,o=t.prefixCls,l=t.header,i=t.headerClass,s=t.children,u=t.isActive,p=t.showArrow,m=t.destroyInactivePanel,d=t.disabled,f=t.accordion,h=t.forceRender,y=t.expandIcon,b=t.extra,v=C()(o+"-header",j({},i,i)),E=C()((j(e={},o+"-item",!0),j(e,o+"-item-active",u),j(e,o+"-item-disabled",d),e),a),g=c.a.createElement("i",{className:"arrow"});return p&&"function"===typeof y&&(g=y(this.props)),c.a.createElement("div",{className:E,style:r,id:n},c.a.createElement("div",{className:v,onClick:this.handleItemClick,role:f?"tab":"button",tabIndex:d?-1:0,"aria-expanded":""+u,onKeyPress:this.handleKeyPress},p&&g,l,b&&c.a.createElement("div",{className:o+"-extra"},b)),c.a.createElement(A.a,{showProp:"isActive",exclusive:!0,component:"",animation:this.props.openAnimation},c.a.createElement(k,{prefixCls:o,isActive:u,destroyInactivePanel:m,forceRender:h,role:f?"tabpanel":null},s)))}}]),t}(i.Component);_.defaultProps={showArrow:!0,isActive:!1,destroyInactivePanel:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var F=_,R=a(52);function K(e,t,a,n){var r=void 0;return Object(R.a)(e,a,{start:function(){t?(r=e.offsetHeight,e.style.height=0):e.style.height=e.offsetHeight+"px"},active:function(){e.style.height=(t?r:0)+"px"},end:function(){e.style.height="",n()}})}var L=function(e){return{enter:function(t,a){return K(t,!0,e+"-anim",a)},leave:function(t,a){return K(t,!1,e+"-anim",a)}}},G=a(36),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t.map((function(e){return String(e)}))}var H=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));W.call(a);var n=e.activeKey,r=e.defaultActiveKey;return"activeKey"in e&&(r=n),a.state={openAnimation:e.openAnimation||L(e.prefixCls),activeKey:B(r)},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),T(t,[{key:"shouldComponentUpdate",value:function(e,t){return!x()(this.props,e)||!x()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,r=t.style,o=t.accordion,l=C()((M(e={},a,!0),M(e,n,!!n),e));return c.a.createElement("div",{className:l,style:r,role:o?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=B(e.activeKey)),"openAnimation"in e&&(t.openAnimation=e.openAnimation),t.activeKey||t.openAnimation?t:null}}]),t}(i.Component),W=function(){var e=this;this.onClickItem=function(t){var a=e.state.activeKey;if(e.props.accordion)a=a[0]===t?[]:[t];else{var n=(a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a))).indexOf(t);n>-1?a.splice(n,1):a.push(t)}e.setActiveKey(a)},this.getNewChild=function(t,a){if(!t)return null;var n=e.state.activeKey,r=e.props,o=r.prefixCls,l=r.accordion,i=r.destroyInactivePanel,s=r.expandIcon,u=t.key||String(a),p=t.props,m=p.header,d=p.headerClass,f=p.disabled,h={key:u,panelKey:u,header:m,headerClass:d,isActive:l?n[0]===u:n.indexOf(u)>-1,prefixCls:o,destroyInactivePanel:i,openAnimation:e.state.openAnimation,accordion:l,children:t.props.children,onItemClick:f?null:e.onClickItem,expandIcon:s};return"string"===typeof t.type?t:c.a.cloneElement(t,h)},this.getItems=function(){var t=e.props.children,a=Object(G.isFragment)(t)?t.props.children:t,n=i.Children.map(a,e.getNewChild);return Object(G.isFragment)(t)?c.a.createElement(c.a.Fragment,null,n):n},this.setActiveKey=function(t){"activeKey"in e.props||e.setState({activeKey:t}),e.props.onChange(e.props.accordion?t[0]:t)}};H.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},H.Panel=F;var V=H,q=(H.Panel,a(346)),U=a.n(q),J=a(131);function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Z=function(e){var t,a,n,r=i.useContext(J.b).getPrefixCls,o=e.prefixCls,l=e.className,c=void 0===l?"":l,s=e.showArrow,u=void 0===s||s,p=r("collapse",o),m=C()((t={},a="".concat(p,"-no-arrow"),n=!u,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t),c);return i.createElement(V.Panel,z({},e,{prefixCls:p,className:m}))},$=a(251),Q=a.n($);function X(e,t,a){var n,r;return Object(R.a)(e,"ant-motion-collapse-legacy",{start:function(){t?(n=e.offsetHeight,e.style.height="0px",e.style.opacity="0"):(e.style.height="".concat(e.offsetHeight,"px"),e.style.opacity="1")},active:function(){r&&Q.a.cancel(r),r=Q()((function(){e.style.height="".concat(t?n:0,"px"),e.style.opacity=t?"1":"0"}))},end:function(){r&&Q.a.cancel(r),e.style.height="",e.style.opacity="",a()}})}var Y={enter:function(e,t){return X(e,!0,t)},leave:function(e,t){return X(e,!1,t)},appear:function(e,t){return X(e,!0,t)}},ee=a(24);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=function(e){var t,a=i.useContext(J.b),n=a.getPrefixCls,r=a.direction,o=e.prefixCls,l=e.className,c=void 0===l?"":l,s=e.bordered,u=n("collapse",o),p=function(){var t=e.expandIconPosition;return void 0!==t?t:"rtl"===r?"right":"left"}(),m=C()((ae(t={},"".concat(u,"-borderless"),!s),ae(t,"".concat(u,"-icon-position-").concat(p),!0),ae(t,"".concat(u,"-rtl"),"rtl"===r),t),c),d=te(te({},Y),{appear:function(){}});return i.createElement(V,te({openAnimation:d},e,{expandIcon:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.expandIcon,n=a?a(t):i.createElement(U.a,{rotate:t.isActive?90:void 0});return Object(ee.a)(n,(function(){return{className:C()(n.props.className,"".concat(u,"-arrow"))}}))}(t)},prefixCls:u,className:m}))};ne.Panel=Z,ne.defaultProps={bordered:!0};var re=ne;const oe=re.Panel,le=RegExp(/^[ ',-\.A-Za-z\xC0-\xCF\xD1-\xD6\xD8-\xDD\xDF-\xE5\xE7-\xF6\xF8-\xFD\xFF\u0104-\u0107\u010C\u010D\u0116-\u0119\u012E\u012F\u0141-\u0144\u0152\u0160\u0161\u016A\u016B\u0172\u0173\u0178-\u017E\u2202]+$/);let ie={},ce=null,se={},ue=null,pe=!1,me="",de=[],fe={relationship:[""]};class he extends c.a.Component{constructor(e){super(e),this.openNotificationWithIcon=e=>{m.a[e]({message:"Matter Saved"})},this.openNotificationWithfailure=e=>{m.a[e]({message:"Failure"})},this.handleSubmit=e=>{if(e.preventDefault(),m.a.destroy(),""===this.state.matterDescription||void 0===this.state.matterDescription)return m.a.warning({message:"Please add a matter description"});if(""===this.state.client||void 0===this.state.client)return m.a.warning({message:"Please add a Contact"});{this.setState({disable:!0}),console.log("all good");const e=this.state;e.customFields=de,e.userId=this.props.userId,console.log(e),this.state.editMode||h.b.post("matter/create",e).then(e=>{console.log(e),this.openNotificationWithIcon("success"),this.setState({disable:!1}),void 0!=this.props.location&&this.props.history.goBack()}).catch(()=>{this.openNotificationWithfailure("error")})}},this.state={rate:"Flat",status:"Open",client:"",relatedContacts:[],customFields:[{}],modal:!1,disable:!1}}handleCustom(e){e.persist();const t=e.target,a=t.id,n=t.value,r=t.name;de[a]={[r]:n},console.log(de)}componentDidMount(){var e=this;return Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/manage/Matter/edit"===e.props.location.pathname&&(pe=!0,me=e.props.location.state),t.t0=h.b.get("/user/view/"+e.props.userId),t.next=4,h.b.get("contact/viewforuser/"+e.props.userId);case 4:return t.t1=se=t.sent,t.next=7,t.t0.then.call(t.t0,t.t1);case 7:ie=t.sent,ue=se.data.data.map((e,t)=>c.a.createElement("option",{id:t},e.firstName)),ce=ie.data.data.customFields.map((t,a)=>c.a.createElement(s.a.Group,{key:a,controlId:a},c.a.createElement(s.a.Label,null,t.name),c.a.createElement(s.a.Control,{required:t.required,name:t.name,type:t.type,onChange:e.handleCustom}))),e.setState({optns:ue,customFields:ce});case 11:case"end":return t.stop()}}),t)})))()}render(){const e=e=>{e.persist(),"client"===e.target.name?0!=e.target.selectedIndex?this.setState(t=>Object(n.a)(Object(n.a)({},t),{},{[e.target.name]:se.data.data[e.target.selectedIndex-1]})):this.setState(t=>Object(n.a)(Object(n.a)({},t),{},{[e.target.name]:""})):this.setState(t=>Object(n.a)(Object(n.a)({},t),{},{[e.target.name]:e.target.value})),console.log(this.state)};return c.a.createElement("div",{className:"form-width"},c.a.createElement("div",{className:"form-header-container mb-4"},c.a.createElement("h3",{className:"form-header-text"},"Add New Matter")),c.a.createElement(d.a,{title:"Matter Information",className:"mb-4"},c.a.createElement(s.a,{className:"form-details"},c.a.createElement(s.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(s.a.Label,null,"Client"),c.a.createElement(s.a.Control,{as:"select",name:"client",onChange:e},c.a.createElement("option",null,"Select a contact"),ue)),c.a.createElement("div",{className:"form-add mb-4"},c.a.createElement("span",{onClick:()=>this.setState({modal:!0})},"Add Contact")),c.a.createElement(s.a.Group,{controlId:"formGroupMatter"},c.a.createElement(s.a.Label,null,"Matter Description"),c.a.createElement(s.a.Control,{required:!0,name:"matterDescription",as:"textarea",rows:"3",type:"text",placeholder:"Matter description",value:me.matterDescription,onChange:e})),c.a.createElement(s.a.Group,{controlId:"formGroupClientRefenceNumber"},c.a.createElement(s.a.Label,null,"Client reference number"),c.a.createElement(s.a.Control,{name:"clientReferenceNumber",type:"number",placeholder:"Client Refence Number",value:me.clientReferenceNumber,onChange:e})),c.a.createElement(s.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(s.a.Label,null,"Practise Area"),c.a.createElement(s.a.Control,{as:"select",name:"practiseArea",onChange:e,defaultValue:me.practiseArea},c.a.createElement("option",null,"Select a practise area"),c.a.createElement("option",null,"Attorney"),c.a.createElement("option",null,"Administrative"),c.a.createElement("option",null,"Bankruptcy"),c.a.createElement("option",null,"Business"),c.a.createElement("option",null,"Builder's Liens"),c.a.createElement("option",null,"Civil Litigation"),c.a.createElement("option",null,"Commercial"),c.a.createElement("option",null,"Conveyance (Purchase)"),c.a.createElement("option",null,"Conveyance (Sale)"),c.a.createElement("option",null,"Corporate"),c.a.createElement("option",null,"Criminal"),c.a.createElement("option",null,"Employment"),c.a.createElement("option",null,"Estates"),c.a.createElement("option",null,"Family"),c.a.createElement("option",null,"Immigration"),c.a.createElement("option",null,"Insurance"),c.a.createElement("option",null,"Personal Injury"),c.a.createElement("option",null,"Tax"),c.a.createElement("option",null,"Wills"))),c.a.createElement(s.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(s.a.Label,null,"Status"),c.a.createElement(s.a.Control,{as:"select",name:"status",onChange:e,defaultValue:me.status},c.a.createElement("option",null,"Open"),c.a.createElement("option",null,"Closed"),c.a.createElement("option",null,"Pending"))),c.a.createElement(s.a.Row,{className:"matter-res-date"},c.a.createElement(u.a,{sm:!0},c.a.createElement(s.a.Group,{controlId:"formGroupOpenDate"},c.a.createElement(s.a.Label,null,"Open Date"),c.a.createElement(s.a.Control,{name:"openDate",type:"Date",placeholder:"OpenDate",value:me.openDate,onChange:e}))),c.a.createElement(u.a,{sm:!0},c.a.createElement(s.a.Group,{controlId:"formGroupClosing Date"},c.a.createElement(s.a.Label,null,"Closing Date"),c.a.createElement(s.a.Control,{name:"closing Date",type:"Date",placeholder:"Closing Date",value:me.closeDate,onChange:e}))),c.a.createElement(u.a,{sm:!0},c.a.createElement(s.a.Group,{controlId:"formGroupPendingDate"},c.a.createElement(s.a.Label,null,"Pending Date"),c.a.createElement(s.a.Control,{name:"pendingDate",type:"Date",placeholder:"PendingDate",value:me.pendingDate,onChange:e})))))),c.a.createElement(re,{accordion:!0,className:"mb-2"},c.a.createElement(oe,{header:"Related Contacts",key:"1"},c.a.createElement(s.a,{className:"form-details"},c.a.createElement(b.a,{name:"realtedContacts",InputList:this.state.relatedContacts,option:ue,error:fe.relationship,change:e=>{e.persist();let t=this.state;const a=e.target,n=a.id,r=a.value,o=a.name,l=a.checked,i=a.selectedIndex;switch(t.relatedContacts[n][o]="billThis"===o?l:r,"contact"==o&&(t.relatedContacts[n][o]=se.data.data[e.target.selectedIndex]._id,t.relatedContacts[n].id=i),console.log(fe.relationship),o){case"relationship":fe.relationship[n]=le.test(r)?r.length>20?"Relationship must be less than 20 characters long!":"":"Realtionship must be in characters!"}this.setState(t),console.log(this.state)},editRes:me,delete:e=>{e.persist();const t=e.target,a=(t.name,t.id);let n=this.state;n.relatedContacts.splice(a,1),this.setState(n)},editMode:pe}),c.a.createElement("br",null),c.a.createElement("div",{className:"form-add mb-4"},c.a.createElement("span",{onClick:()=>{let e=this.state.relatedContacts;e.push({relationship:"",contact:"",billThis:"",id:""}),this.setState({relatedContacts:e});let t=this.state;t.Relation=this.state.relatedContacts,this.setState(t)}},"Add Related Contact"))))),c.a.createElement(re,{accordion:!0,className:"mb-2"},c.a.createElement(oe,{header:"Custom Fields",key:"1"},c.a.createElement(s.a,{className:"form-details"},c.a.createElement("p",null,"Customise your",c.a.createElement(p.a,{variant:"link",onClick:()=>this.props.history.push("/settings/customFeilds")},"Custom Fields")),ce))),c.a.createElement(re,{accordion:!0,className:"mb-2"},c.a.createElement(oe,{header:"Billing Preference",key:"1"},c.a.createElement(s.a,{className:"form-details"},c.a.createElement(s.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(s.a.Label,null,"Rate"),c.a.createElement(s.a.Control,{as:"select",onChange:e,defaultValue:me.billingType},c.a.createElement("option",null,"Flat"),c.a.createElement("option",null,"Hourly"),c.a.createElement("option",null,"Contagious")))))),c.a.createElement(re,{accordion:!0,className:"mb-4"},c.a.createElement(oe,{header:"Task Automation",key:"1"},c.a.createElement(s.a,{className:"form-details"},c.a.createElement(s.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(s.a.Label,null,"Task"),c.a.createElement(s.a.Control,{as:"select",onChange:e,defaultValue:me.task},c.a.createElement("option",null,"Client Intake"),c.a.createElement("option",null,"Task List"),c.a.createElement("option",null,"New Task List")))))),c.a.createElement(p.a,{onClick:this.handleSubmit,disabled:this.state.disable,className:"btn btn-success"},"ADD"),c.a.createElement(p.a,{onClick:()=>{this.props.history.goBack()}},"CANCEL"),c.a.createElement("br",null),c.a.createElement(f.a,{centered:!0,visible:this.state.modal,onOk:()=>{this.setState({modal:!1}),this.componentDidMount()},onCancel:()=>{this.setState({modal:!1}),this.componentDidMount()},footer:[c.a.createElement(p.a,{onClick:()=>{this.setState({modal:!1}),this.componentDidMount()}},"Cancel")]},c.a.createElement(y.a,null)))}}t.default=Object(v.b)(e=>({userId:e.user.token.user._id}))(he)}}]);
//# sourceMappingURL=59.585d6254.chunk.js.map