(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[66],{623:function(e,t,a){"use strict";a.r(t);var n=a(225),l=a.n(n),c=a(226),s=a(221),r=a(0),o=a.n(r),i=a(110),d=a(268),m=a(1004),u=a(153),p=a(1001),b=a(989),E=a(1007),y=(a(111),a(237)),h=a.n(y),g=a(8),f=a(230),x=a.n(f),v=(a(231),a(242)),C=a.n(v);class j extends r.Component{constructor(e){super(e)}render(){return o.a.createElement("div",null,o.a.createElement("table",{id:"emp",className:"d-none"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"S.No"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Email Address"))),o.a.createElement("tbody",null,this.props.dataSource.map((e,t)=>o.a.createElement("tr",{key:t},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.firstName),o.a.createElement("td",null,e.emailAddress.map(e=>e)))))),o.a.createElement(C.a,{className:"btn btn-outline-primary btn-sm excel-button",table:"emp",filename:"contacts",sheet:"Sheet",buttonText:"Export to Excel"}))}}var O=j,w=a(3);t.default=e=>{console.log(e);const t=Object(g.d)(e=>e.user.token.user._id),a=Object(r.useState)("contact"),n=Object(s.a)(a,2),y=n[0],f=n[1],v=(Object(g.c)(),function(e){const t=Object(r.useRef)();Object(r.useEffect)(()=>{t.current=e}),console.log(t.current),t.current}(e.location),Object(r.useState)([])),C=Object(s.a)(v,2),j=C[0],k=C[1],N=Object(r.useState)(""),S=Object(s.a)(N,2),A=S[0],_=S[1],D=Object(r.useState)(!0),T=Object(s.a)(D,2),P=T[0],I=T[1],R=Object(r.useState)([]),L=Object(s.a)(R,2),F=L[0],M=L[1],z=Object(r.useState)(!1),J=Object(s.a)(z,2),V=J[0],Y=J[1],H=Object(r.useState)(!1),W=Object(s.a)(H,2),q=W[0],B=W[1];let G={},K={};const Q=Object(r.useState)({tableData:[]}),U=Object(s.a)(Q,2),X=U[0],Z=U[1],$=Object(r.useState)([]),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=(Object(g.d)(e=>e.Contact.contacts),Object(r.useState)()),le=Object(s.a)(ne,2);le[0],le[1];function ce(){return(ce=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.b.get("/contact/viewforuser/"+t);case 2:return G=e.sent,e.next=5,w.b.get("/company/viewforuser/"+t);case 5:K=e.sent,se();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)(()=>{!function(){ce.apply(this,arguments)}()},[]);const se=()=>{I(!1),G.data.data.map((e,t)=>{const a={firstName:e.firstName+" "+e.lastName,billingCustomRate:e.billingCustomRate,_id:e._id,emailAddress:e.emailAddress.map(e=>e.emailType+" : "+e.emailAddress+" ,\n ")};let n=F;n.push(a),M(n)}),console.log(K),K.data.data.map((e,t)=>{const a={firstName:e.name,_id:e._id,billingCustomRate:e.billingCustomRate,emailAddress:e.emailAddress.map(e=>{if(null!=e)return e.emailType+" : "+e.emailAddress+" ,\n "})};let n=j;n.push(a),k(n)});"true"===window.localStorage.getItem("company")?(Z({tableData:j}),f("company")):(Z({tableData:F}),f("contact")),window.localStorage.setItem("company","false")},re=t=>{"Person"===t?e.history.push("/manage/contacts/add/Person"):"Company"===t&&e.history.push("/manage/contacts/add/Company")},oe=e=>{K!={}&&G!={}&&("Person"===e?(Z({tableData:F}),f("contact")):"Company"===e&&(Z({tableData:j}),f("company")))},ie=o.a.createElement("div",null,o.a.createElement(E.a,{style:{"vertical-align":"revert"},onClick:()=>{Y(!1===V)}}),o.a.createElement("span",{style:{paddingLeft:"8px"}}," Name "),V&&o.a.createElement("div",{style:{paddingTop:"10px"}},o.a.createElement("input",{placeholder:"Search",value:A,onChange:e=>{let t;_(e.target.value),0!==e.target.value.length||""===e.target.value?(t=X.tableData.filter(t=>t.firstName.toLowerCase().includes(e.target.value.toLowerCase())),ae(t)):ae(X.tableData)}}))),de=(E.a,[{title:ie,dataIndex:"firstName",key:"_id",render:e=>o.a.createElement(h.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[A],autoEscape:!0,textToHighlight:e?e.toString():""})},{title:"Email",dataIndex:"emailAddress",key:"_id"},{title:"View",dataIndex:"view",key:"_id",render:(e,t)=>o.a.createElement(d.a,{variant:"danger",onClick:()=>me(t)},"View")},{title:"Edit",dataIndex:"edit",key:"_id",render:(t,a)=>o.a.createElement(d.a,{variant:"danger",onClick:()=>(t=>{"contact"===y?e.history.push("/edit/contact",t):"company"===y&&e.history.push("/edit/company",t)})(a)},"Edit")},{title:"Delete",dataIndex:"delete",key:"_id",render:(e,t)=>o.a.createElement(m.a,{title:"Are you sure delete this contact?",onConfirm:()=>(e=>{"contact"===y?w.b.get("/contact/delete/"+e._id).then(()=>{i.a.success({message:"Contact deleted."})}).catch(()=>i.a.error({message:"Failed to delete"})):"company"===y&&w.b.get("/company/delete/"+e._id).then(()=>i.a.success({message:"Company deleted."})).catch(()=>i.a.error({message:"Failed to delete"})),setTimeout(()=>{window.location.reload()},1e3)})(t),okText:"Yes",cancelText:"No"},o.a.createElement(d.a,{danger:!0},"Delete"))}]),me=t=>{"contact"===y&&e.history.push("/view/contact",t._id),"company"===y&&e.history.push("/view/company",t._id)};return o.a.createElement(u.a,{size:"large",spinning:P},o.a.createElement("div",{className:"d-flex mb-2 title-component-header"},o.a.createElement("div",{className:"title-header-name"},o.a.createElement("h5",null,"Contacts")),o.a.createElement("div",{className:"d-flex extra-iteam-div"},o.a.createElement("button",{className:"btn  btn-outline-primary   btn-sm",onClick:()=>{const e=new x.a("portrait","pt","A4");e.setFontSize(15);let t=[];X.tableData.map((e,a)=>{const n=[e.firstName,e.emailAddress];t.push(n)});let a={startY:50,head:[["Name","Email"]],body:t};e.text("Contacts",40,40),e.autoTable(a),e.save("contact.pdf")}},"Export to Pdf"),o.a.createElement(O,{dataSource:X.tableData||[]}))),o.a.createElement(p.a,null,o.a.createElement("div",{className:"d-flex justify-content-between give-box-direction"},o.a.createElement("div",null,o.a.createElement(d.a,{color:"success",style:{margin:"0 10px 10px 0"},onClick:()=>oe("Person")},"Person"),o.a.createElement(d.a,{color:"success",style:{margin:"0 10px 10px 0"},onClick:()=>oe("Company")},"Company")),o.a.createElement("div",null,o.a.createElement(d.a,{color:"success",style:{margin:"0 10px 10px 0"},onClick:()=>re("Person")},"Add Person"),o.a.createElement(d.a,{color:"success",style:{margin:"0 10px 10px 0"},onClick:()=>re("Company")},"Add Company"))),o.a.createElement(b.a,{className:"table-responsive",dataSource:0===te.length&&""===A?X.tableData:te,columns:de,onRow:(e,t)=>({onDoubleClick:()=>me(e),onContextMenu:e=>{},onMouseEnter:e=>{},onMouseLeave:e=>{}})})))}}}]);
//# sourceMappingURL=66.d9ec9af7.chunk.js.map