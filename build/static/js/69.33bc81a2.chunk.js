(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[69],{350:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(946),s=a(110),i=a(974),o=a(268),d=a(1004),c=a(1001),m=a(989),u=a(996),p=a(3),h=a(8),E=a(999),b=a(13),y=a.n(b);const k=r.a.TabPane;let C={};class f extends n.a.Component{constructor(e){super(e),this.state={data:{default:!1,required:!1},disable:!1,tableData:[],visible:!1,editMode:!1}}componentDidMount(){let e=[];p.b.get("/user/view/"+this.props.userId).then(t=>{C=t.data.data,console.log(t),t.data.data.customFields.map((t,a)=>{const l={_id:t.type,key:a,name:t.name,type:t.type,default:t.default,required:t.required};e.push(l)}),this.setState({tableData:e})})}render(){const e=e=>{e.persist();const t=e.target,a=t.value,l=t.name;let n=this.state;"required"===e.target.name||"default"===e.target.name?n.data[l]=!n.data[l]:n.data[l]=a,this.setState(n),console.log(this.state)},t=()=>{s.a.destroy();const e={userId:this.props.userId,name:this.state.data.name,type:this.state.data.type,default:this.state.data.default,required:this.state.data.required};return""===e.name||void 0===e.name?s.a.warning({message:"Please select a name"}):""===e.type||void 0===e.type?s.a.warning({message:"Please select a type"}):!0===e.required&&!0===e.default||!1===e.required&&!1===e.default?s.a.warning({message:"Please select check either default or required"}):(this.setState({disable:!0}),console.log(this.state),this.state.editMode?C.customFields[this.state.data.key]=e:C.customFields.push(e),p.b.post("/user/update/"+this.props.userId,C).then(e=>{s.a.success({message:"Field Saved."}),this.componentDidMount(),this.setState({visible:!1,disable:!1,editMode:!1})}).catch(()=>{s.a.error({message:"Failed to add"})}).then(()=>{y.a.findDOMNode(this.messageForm).reset()}),void setTimeout(()=>{},1e3))},a=e=>{this.setState({data:e,editMode:!0}),console.log(e)},l=()=>{y.a.findDOMNode(this.messageForm).reset(),this.setState({visible:!1,editMode:!1})},h=e=>{C.customFields.splice(e.key,1),p.b.post("/user/update/"+this.props.userId,C).then(e=>{s.a.success({message:"Custom Feild Deleted"}),this.componentDidMount()}).catch(e=>{s.a.error({message:"Failed to delete"})}),setTimeout(()=>{},1e3)},b=[{title:"Name",dataIndex:"name",key:"name",render:e=>n.a.createElement("a",null,e)},{title:"Type",dataIndex:"type",key:"type"},{title:"Default",dataIndex:"default",key:"default",render:e=>n.a.createElement(E.a.Check,{type:"checkbox",id:"default",checked:e})},{title:"Required",dataIndex:"required",key:"required",render:e=>n.a.createElement(E.a.Check,{type:"checkbox",id:"required",checked:e})},{title:"Action",key:"action",render:(e,t)=>n.a.createElement(i.a,{size:"middle"},n.a.createElement(o.a,{onClick:()=>a(t),type:"link"},"Edit"),n.a.createElement(d.a,{title:"Are you sure delete this Feild?",onConfirm:()=>h(t),onCancel:this.cancel,okText:"Yes",cancelText:"No"},n.a.createElement(o.a,{type:"link"},"Delete")))}],f=n.a.createElement(o.a,{onClick:()=>this.setState({visible:!0})},"Add");return n.a.createElement(c.a,null,n.a.createElement(r.a,{tabBarExtraContent:f},n.a.createElement(k,{tab:"Custom Field",key:"1"},n.a.createElement(m.a,{className:"table-responsive",columns:b,dataSource:this.state.tableData}))),n.a.createElement(u.a,{title:"Add Custom Field",centered:!0,visible:this.state.visible,onOk:t,onCancel:l,footer:[n.a.createElement(o.a,{onClick:l},"Cancel"),n.a.createElement(o.a,{type:"primary",disabled:this.state.disable,onClick:t},"Create Field")]},n.a.createElement(E.a,{id:"myForm",className:"form",ref:e=>this.messageForm=e},n.a.createElement(E.a.Group,{controlId:"Name"},n.a.createElement(E.a.Label,null,"Name"),n.a.createElement(E.a.Control,{type:"name",placeholder:"Name",name:"name",onChange:e})),n.a.createElement(E.a.Group,{controlId:"Type"},n.a.createElement(E.a.Label,null,"Select Custom Field type"),n.a.createElement(E.a.Control,{as:"select",name:"type",onChange:e},n.a.createElement("option",null,"Checkbox"),n.a.createElement("option",null,"Date"),n.a.createElement("option",null,"password"),n.a.createElement("option",null,"Integer"),n.a.createElement("option",null,"Matter"),n.a.createElement("option",null,"number"),n.a.createElement("option",null,"Picklist"),n.a.createElement("option",null,"Text"))),n.a.createElement(E.a.Group,null,n.a.createElement(E.a.Check,{type:"checkbox",id:"Default",label:"Default",name:"default",onChange:e}),n.a.createElement("br",null),n.a.createElement(E.a.Check,{type:"checkbox",id:"Required",label:"Required",name:"required",onChange:e})))),n.a.createElement(u.a,{title:"Edit Custom Feild",centered:!0,visible:this.state.editMode,onOk:t,onCancel:l,footer:[n.a.createElement(o.a,{onClick:l},"Cancel"),n.a.createElement(o.a,{type:"primary",disabled:this.state.disable,onClick:t},"Edit Feild")]},n.a.createElement(E.a,{id:"myForm",className:"form",ref:e=>this.messageForm=e},n.a.createElement(E.a.Group,{controlId:"Name"},n.a.createElement(E.a.Label,null,"Name"),n.a.createElement(E.a.Control,{type:"name",defaultValue:this.state.data.name,name:"name",onChange:e})),n.a.createElement(E.a.Group,{controlId:"Type"},n.a.createElement(E.a.Label,null,"Select Custom Feild type"),n.a.createElement(E.a.Control,{as:"select",name:"type",defaultValue:this.state.data.type,onChange:e},n.a.createElement("option",null,"Checkbox"),n.a.createElement("option",null,"Date"),n.a.createElement("option",null,"password"),n.a.createElement("option",null,"Integer"),n.a.createElement("option",null,"Matter"),n.a.createElement("option",null,"number"),n.a.createElement("option",null,"Picklist"),n.a.createElement("option",null,"Text")),n.a.createElement("br",null),n.a.createElement(E.a.Check,{type:"checkbox",id:"Default",label:"Default",name:"default",defaultChecked:this.state.data.default,onChange:e}),n.a.createElement("br",null),n.a.createElement(E.a.Check,{type:"checkbox",id:"Required",label:"Required",defaultChecked:this.state.data.required,name:"required",onChange:e})))))}}t.default=Object(h.b)(e=>({userId:e.user.token.user._id}))(f)}}]);
//# sourceMappingURL=69.33bc81a2.chunk.js.map